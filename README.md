# DSM - 一个致力于完善MCSM的轻量级管理面板
### —— 开启轻量化，易用的小型面板新时代！
<br />
&ensp;&ensp;&ensp;&ensp;MCSManager（下文简称MCSM）作为一个已经开发多年，且目前已经趋于完备，在Minecraft 和其他游戏社区内中已有一定的流行程度的面板，其在目前成为多数面板服腐竹们的首选。
<br />
<br />
&ensp;&ensp;&ensp;&ensp;但随着MCSM 8.X版本正式停止维护，9.X版本的正式到来，MCSM在成功申请到知识产权保护的同时，也改用AGPL这一极为严格，且具有传染性的开源协议；这意味着任何基于MCSM二次开发的项目，在分发时均需要进行开源化，并且同样使用AGPL协议作为自己项目的开源协议，这对希望进行面板二次开发进行商业化的用户们是十分不利的。
<br />
<br />
&ensp;&ensp;&ensp;&ensp;MCSM 8.X版本虽采用较为宽松的MIT开源协议，进行二次开发的约束相对较小；但由于目前停止维护的缘故，其中许多bug（如缺少服务器实例的分类与搜索机制，对上传文件完整性缺乏校验，用户权限分级不完善等）无法在后续更新的8.X版本中得到修复。这也是我们开发DSM的初衷。
<br />
<br />
&ensp;&ensp;&ensp;&ensp;由于MCSM有相关知识产权的保护，因此我们决定，完全弃用任一版本的MCSM代码，转而对MCSM进行黑盒实现，故早期版本一定是十分不完善的。相关bug可以直接在issue处反馈，我们也欢迎其他开发者为我们的项目作出贡献！
<br />
<br />

#### &ensp;&ensp;&ensp;&ensp;DSM，全称StarLight Minecraft Server Manager，由于首字母简写为两个SM，因此简写为DSM（Double SM），此处存放的是DSM的前端代码！

---------

# —— 开发者文档部分
## Part 1 与后端的通讯协议

- ## 1.1 未压缩版（通讯包以JSON字符串为主）
    
    - ### 1.1.1 总体包格式
        
        - 任何包都具有以下通用的部分：
      
        &ensp;&ensp;&ensp;&ensp;```{"header": packet-header, "args": packet-args}```
  
        <br />

        - 其中 **packet-header** 为包头，为String类型，表明这个包的作用（如：登录握手，进程输出消息传递等）， **packet-args** 为包内容，类型可变，记录了这个包的更多相关信息。任何未压缩的通讯包，最外层一定会遵循该格式。
          
        <br />

        - 以下所有包的描述将不再显示该格式，而只会给出 **header** 和 **args** 的内容，以方便阅读，但请确保任何通讯包都遵循该格式，以防后端发生解析失败的情况。
    
    - ### 1.1.2 错误包
        
        - 作用：当发生任何错误的时候，后端均会返回该包，以提示错误的类型。
        - **header：error**
        - args：
          - 类型：map
          - 基本格式：{ "code": error-code, "reason": error-reason }
          - 基本格式释义：
            - code：错误码，为int类型，可为以下值：
              - 100：上传的文件SHA-1值校验失败
              - 101：操作过于频繁
              - 200：通讯包被服务器主动拒收（可能正在调试）
              - 403：权限不足，访问被禁止
              - 404：操作的文件或目录不存在
              - 500：包格式错误
              - 501：服务器自身发生意外的错误
              - 502：服务器正在关闭
            - reason：错误原因，为String类型（不会为null），详细描述错误的具体内容
            
    - ### 1.1.3 登录握手包
      - 作用：在**登录**时，进行握手与相关合法性校验工作
      - header: login
      - args:
        - 类型：map
        - 基本格式：{ "status": login-status, "reason": login-reason, "accessKey": access-key }
        - 基本格式释义：
          - status：登录状态，为String类型，可为以下值：
            - "success"：表明登录成功，无错误发生
            - "failed"：表明因某些原因登录失败
          - reason：登录状态发生的原因，为String类型（不会为null），详细描述登录成功或失败的具体原。
          - accessKey：登录许可密钥，为String类型（登录失败时为null），用于后续所有操作的合法性校验，建议用cookie缓存。